# 压力测试报告生成

<p>
   <a href="README.md"> English <a/>| 中文
</p>

## 功能概述
本包提供标准化的压力测试报告生成功能，支持：

- ✅ 中英文双语输出
- ⏱️ 自动计算QPS、延迟百分位等关键指标
- 📈 线程安全的并发数据收集
- 🎨 美观的格式化控制台输出


## 使用示例
### 基础用法
```go
func TestExample(t *testing.T) {
    latencies := []time.Duration{
        120 * time.Millisecond,
        150 * time.Millisecond,
        // ...更多测试数据 
    }
    
    pressure_report_format.PrintPressureLog(
        t,
        pressure_report_format.Chinese,
        100,    // 并发数 
        1000,   // 总请求 
        10*time.Second, // 测试时长 
        5,      // 失败数 
        latencies,
    )
}
```

### 指标计算
| 指标类型       | 计算方式                  | 说明     |
|----------------|--------------------------|--------|
| QPS            | 总请求数/测试时长(s)      | 含失败请求  |
| 延迟百分位      | P50/P90/P99              | 线性插值算法 |
| 吞吐量         | 成功请求数/测试时长(s)    |        |

### 基础报告样例

#### 中文模式

```plaintext
🚀 并发测试报告 
-------------------------------- 
并发数:       50 
总请求量:     1000 
测试时长:     6.066652097s 
失败请求:     0 
QPS:         164.84 
平均延迟:     293.044987ms 
P99延迟:      825.862915ms
```

#### 英文模式
```plaintext
🚀 Pressure Test Report 
-------------------------------- 
Concurrency:       50 
Total Requests:     1000 
Duration:     5.759418107s 
Failures:     0 
QPS:         173.63 
Avg Latency:     254.09147ms 
P99 Latency:      750.907967ms
```

### 详细报告样例(在不影响压测性能下待完善)

#### 中文模式

```plaintext
🚀 增强版压力测试报告 
================================ 
📊 基础指标 
-------------------------------- 
并发数:       100 (req/goroutine)
总请求量:     10000 (失败: 962)
成功率:       90.38%
测试时长:     45.444252266s 
QPS:         220.05 
吞吐量:      0.10 MB/s 
慢请求(>500ms): 2517 (27.8%)
峰值并发:      8647
 
⏱️ 延迟统计 (单位: ms)
-------------------------------- 
平均:        363.76ms 
P50:        363.35ms 
P90:        604.56ms 
P99:        671.74ms 
最大:        713.85ms 
最小:        32.06ms 
 
📈 延迟分布 
0.00ms-10.00ms |                                                              0.0%
10.00ms-50.00ms |                                                              0.5%
50.00ms-100.00ms | ██                                                           5.1%
100.00ms-200.00ms | ████████                                                     17.4%
200.00ms-500.00ms | ████████████████████████                                     49.1%
500.00ms-1000.00ms | █████████████                                                27.8%
1000.00ms-2000.00ms |                                                              0.0%
2000.00ms-5000.00ms |                                                              0.0%
 
 
🛠️ 系统指标 
-------------------------------- 
总数据量:    4.4 MB 
状态码分布:  200: 9038
GC次数:     100
CPU使用率:  0.0000%
Goroutines: 2 (初始: 2) ✅ 正常 
内存占用:    0.32 MB
pressure_enhance_log_test.go:275: 
❌ 错误摘要:
  - connection_error (出现 304 次)
  - unknown_error (出现 335 次)
  - timeout (出现 323 次)
```